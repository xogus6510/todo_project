<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script src="https://unpkg.com/vue@next"></script>
        <script src="https://unpkg.com/vue-router@4"></script>
        <script src="./all.js"></script>
        <script src="./done.js"></script>
        <script src="./undone.js"></script>
    </head>
    <body>

        <div id="app">
            <h1>{{ main }}</h1>
            <router-link to="/">All</router-link>
            &nbsp;
            <router-link to="/done">Done</router-link>
            &nbsp;
            <router-link to="/undone">Undone</router-link>
            <br><br>
            <!-- TODO 입력 -->
            <input
                type="text"
                placeholder="Add a new task"
                v-model="newTodoItem"
                @keyup.enter="addTodoItem"/>

            <button class="add__button" @click="addTodoItem">Add</button>

            <router-view></router-view>

        </div>

        <script>

            const app = Vue.createApp({
                data() {
                    return {main: "To Do List", newTodoItem: ''}
                },
                methods: {
                    addTodoItem() {
                        if (this.newTodoItem !== '') {

                           const value = {
                                item: this.newTodoItem,
                                date: `${new Date().getFullYear()}-${new Date().getMonth() + 1}-${new Date().getDate()}-${new Date().getHours()}-${new Date().getMinutes()}-${new Date().getSeconds()}`,
                            }

                            // setItem 이라는 method 속에 key, value를 전달
                            localStorage.setItem(`${new Date().getFullYear()}-${new Date().getMonth() + 1}-${new Date().getDate()}-${new Date().getHours()}-${new Date().getMinutes()}-${new Date().getSeconds()}` , JSON.stringify(value));
                            this.clearInput()

                        }
                    },
                    clearInput() {
                        this.newTodoItem = ''
                    }

                }
            });

            const routes = [
                {
                    path: "/",
                    component: All
                }, {
                    path: "/done",
                    component: Done
                }, {
                    path: "/undone",
                    component: Undone
                }
            ];

            const router = VueRouter.createRouter(
                {history: VueRouter.createWebHashHistory(), routes}
            )

            app.use(router)
            app.mount('#app')
        </script>

    </body>
</html>
<!-- https://code-hoon.tistory.com/194 글 제목 [ Vue.js ] LocalStorage 이용하는 방법,
예제-->
<!-- https://nykim.work/75 [Vue/Vuex] 뷰 실습 - Todo 웹앱 만들기 -->